
> test
> cross-env NODE_OPTIONS=--experimental-vm-modules jest --watchAll=false SBD-F25-TP2

(node:97600) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/spec/admin/SBD-F25-TP2-001_ListExistingBundlesPopulatesSelect.spec.js
  SPEC SBD-F25-TP2-001: Existing bundles populate the composer select
    ✕ listExistingBundles feeds the dropdown and Save relabels to Update after a selection (16 ms)

  ● SPEC SBD-F25-TP2-001: Existing bundles populate the composer select › listExistingBundles feeds the dropdown and Save relabels to Update after a selection

    expect(received).toBeUndefined()

    Received: [Error: Cannot find module '/Users/rajeshk/Downloads/sbd/src/ui/patterns/inline-bundle-composer/index.js' from 'tests/fixtures/inlineBundleComposerHarness.js']

      18 |     const saveButton = document.getElementById('inlineBundleSave');
      19 |
    > 20 |     expect(importError).toBeUndefined();
         |                         ^
      21 |     expect(mountError).toBeUndefined();
      22 |     expect(adapters.listExistingBundles).toHaveBeenCalledTimes(1);
      23 |

      at Object.<anonymous> (tests/spec/admin/SBD-F25-TP2-001_ListExistingBundlesPopulatesSelect.spec.js:20:25)

(node:97599) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/spec/admin/SBD-F25-TP2-002_LoadExistingBundleMergesContext.spec.js
  SPEC SBD-F25-TP2-002: Loading an existing bundle merges context without duplicates
    ✕ Selecting an existing bundle hydrates fields, merges chips, and keeps ids unique (22 ms)

  ● SPEC SBD-F25-TP2-002: Loading an existing bundle merges context without duplicates › Selecting an existing bundle hydrates fields, merges chips, and keeps ids unique

    expect(received).toBeUndefined()

    Received: [Error: Cannot find module '/Users/rajeshk/Downloads/sbd/src/ui/patterns/inline-bundle-composer/index.js' from 'tests/fixtures/inlineBundleComposerHarness.js']

      24 |     const priceInput = document.getElementById('inlineBundlePrice');
      25 |
    > 26 |     expect(importError).toBeUndefined();
         |                         ^
      27 |     expect(mountError).toBeUndefined();
      28 |     expect(api?.controller).toBeTruthy();
      29 |

      at Object.<anonymous> (tests/spec/admin/SBD-F25-TP2-002_LoadExistingBundleMergesContext.spec.js:26:25)

(node:97598) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/spec/admin/SBD-F25-TP2-003_UpdateBundleSavesUsingExistingId.spec.js
  SPEC SBD-F25-TP2-003: Continuing a bundle saves with the existing id
    ✕ Save payload for an existing bundle carries the bundleId and merged book ids (28 ms)

  ● SPEC SBD-F25-TP2-003: Continuing a bundle saves with the existing id › Save payload for an existing bundle carries the bundleId and merged book ids

    expect(received).toBeUndefined()

    Received: [Error: Cannot find module '/Users/rajeshk/Downloads/sbd/src/ui/patterns/inline-bundle-composer/index.js' from 'tests/fixtures/inlineBundleComposerHarness.js']

      25 |     const saveButton = document.getElementById('inlineBundleSave');
      26 |
    > 27 |     expect(importError).toBeUndefined();
         |                         ^
      28 |     expect(mountError).toBeUndefined();
      29 |     expect(api?.controller).toBeTruthy();
      30 |

      at Object.<anonymous> (tests/spec/admin/SBD-F25-TP2-003_UpdateBundleSavesUsingExistingId.spec.js:27:25)

---------------------------------------------------|---------|----------|---------|---------|-------------------
File                                               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
---------------------------------------------------|---------|----------|---------|---------|-------------------
All files                                          |       0 |        0 |       0 |       0 |                   
 scripts/admin                                     |       0 |        0 |       0 |       0 |                   
  auth.js                                          |       0 |        0 |       0 |       0 | 24-79             
  autoPrice.js                                     |       0 |        0 |       0 |       0 | 2-25              
  availablePagination.js                           |       0 |        0 |       0 |       0 | 5-353             
  bundleList.js                                    |       0 |        0 |       0 |       0 | 2-510             
  bundleStatus.js                                  |       0 |        0 |       0 |       0 | 7-110             
  bundles.js                                       |       0 |        0 |       0 |       0 | 3-494             
  currency.js                                      |       0 |        0 |       0 |       0 | 6-31              
  customerLookup.js                                |       0 |        0 |       0 |       0 | 3-392             
  customers.js                                     |       0 |        0 |       0 |       0 | 3-520             
  editor.js                                        |       0 |        0 |       0 |       0 | 27-411            
  inventory.js                                     |       0 |        0 |       0 |       0 | 32-1385           
  lookup.js                                        |       0 |        0 |       0 |       0 | 11-483            
  main.js                                          |       0 |        0 |       0 |       0 | 40-2318           
  requests.js                                      |       0 |        0 |       0 |       0 | 6-73              
  salesEntryLauncher.js                            |       0 |        0 |       0 |       0 | 2-68              
  salesHeader.js                                   |       0 |        0 |       0 |       0 | 3-505             
  salesLineItems.js                                |       0 |        0 |       0 |       0 | 3-914             
  salesPersist.js                                  |       0 |        0 |       0 |       0 | 1-170             
  salesTitleAutocomplete.js                        |       0 |        0 |       0 |       0 | 9-225             
  suppliers.js                                     |       0 |        0 |       0 |       0 | 13-319            
 src/ui/patterns/inline-bundle-composer-controller |       0 |        0 |       0 |       0 |                   
  index.js                                         |       0 |        0 |       0 |       0 | 1-284             
 src/ui/patterns/inline-bundle-panel-shell         |       0 |        0 |       0 |       0 |                   
  index.js                                         |       0 |        0 |       0 |       0 | 1-294             
---------------------------------------------------|---------|----------|---------|---------|-------------------
Test Suites: 3 failed, 3 total
Tests:       3 failed, 3 total
Snapshots:   0 total
Time:        1.579 s
Ran all test suites matching /SBD-F25-TP2/i.
