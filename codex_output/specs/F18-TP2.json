{
  "topicId": "F18-TP2",
  "featureId": "F18",
  "title": "Admin List Pagination Shell",
  "area": "Admin / Lists",
  "goal": "Provide the shared pagination shell (summary copy, Prev/Next, numeric pager, optional load-more) so every admin list reuses one DOM pattern.",
  "environment": "HTML + Vanilla JavaScript + Firebase + Jest + jsdom",
  "status": "GREEN",
  "specs": [
    {
      "id": "F18-TP2-001",
      "title": "BusyStateDisablesPrevNext",
      "given": "The shell receives UI state where prevDisabled/nextDisabled flags come from the controller and isBusy is true while fetching.",
      "when": "buildPaginationShellState derives summary copy for the view.",
      "then": "It emits a summary string for the active slice and forces both Prev and Next buttons into disabled/aria-disabled states whenever the controller is busy.",
      "test": "/tests/unit/pagination/F18-TP2_paginationShell.test.js"
    },
    {
      "id": "F18-TP2-002",
      "title": "NumericPagerCompressesRanges",
      "given": "An admin view exposes ten or more pages so the numeric pager should collapse middle ranges.",
      "when": "The shared shell syncs DOM nodes inside [data-pagination-pages].",
      "then": "It renders buttons for the first/last/current pages, inserts \u2026 gaps where pages are skipped, and marks the active page with aria-current=page for keyboard users.",
      "test": "/tests/unit/pagination/F18-TP2_paginationShell.test.js"
    },
    {
      "id": "F18-TP2-003",
      "title": "NumericButtonsCallGoToPage",
      "given": "A controller exposes goToPage and the numeric pager shows more than one page button.",
      "when": "An admin clicks a different page chip.",
      "then": "The shell calls controller.goToPage with that page number exactly once and keeps focus on the activated button while the summary re-announces via aria-live.",
      "test": "/tests/unit/pagination/F18-TP2_paginationShell.test.js"
    },
    {
      "id": "F18-TP2-004",
      "title": "PageSizeSelectDelegatesAndResyncs",
      "given": "The shared \"Rows per page\" select exists for both Available and Sold panels.",
      "when": "An admin changes the value (or types an invalid entry).",
      "then": "The shell calls controller.setPageSize with the sanitized number, resets the select to a safe value when invalid text is entered, and re-runs sync so the summary reflects the new range.",
      "test": "/tests/unit/pagination/F18-TP2_paginationShell.test.js"
    },
    {
      "id": "F18-TP2-005",
      "title": "LoadMoreModeProvidesButton",
      "given": "Some adopters prefer load-more instead of Prev/Next and the controller exposes mode='loadMore' plus a loadMoreLabel.",
      "when": "The shell syncs while in load-more mode.",
      "then": "It renders a dedicated Load more button that reads the provided label, disables it while the controller is busy, and calls controller.loadMore when activated.",
      "test": "/tests/unit/pagination/F18-TP2_paginationShell.test.js"
    }
  ],
  "fixtures": [
    "/tests/fixtures/adminInventoryHarness.js",
    "/tests/fixtures/paginationControllerStub.js",
    "/tests/fixtures/availableSoldControllerFactory.js"
  ],
  "tests": [
    "/tests/unit/pagination/F18-TP2_paginationShell.test.js"
  ],
  "reports": {
    "red": "codex_output/reports/F18-TP2_red.txt",
    "green": "codex_output/reports/F18-TP2_green.txt"
  },
  "changedFiles": [
    "scripts/admin/inventory.js"
  ],
  "changeNotes": [
    "initPaginationShell now renders a dedicated Load more button whenever the controller reports mode='loadMore', wiring clicks to controller.loadMore and mirroring the busy/aria state from the pager.",
    "Numeric page chips stay hidden in load-more mode to avoid conflicting controls while the existing prev/next wiring continues to drive pager mode."
  ],
  "validation": {
    "status": "GREEN",
    "command": "npm test -- --watchAll=false",
    "report": "codex_output/reports/F18-TP2_green.txt"
  }
}
