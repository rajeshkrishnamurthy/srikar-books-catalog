<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Srikar’s Books — Catalog</title>
    <meta
      name="description"
      content="Browse Srikar’s curated used books. Message on WhatsApp to buy."
    />
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin />
    <!-- Base styles shared across admin + catalog -->
    <link rel="stylesheet" href="./styles.css?v=7" />
    <!-- Page-specific tweaks -->
    <link rel="stylesheet" href="./styles/index.css?v=1" />
    <!-- NEW: Embla carousel styles -->
    <link rel="stylesheet" href="./styles/carousel.css?v=2" />
  </head>
  <body>
    <header class="site-header">
      <div class="wrap">
        <h1 class="brand"><a href="./">Srikar’s Books</a></h1>
        <nav class="tabs" role="tablist" aria-label="Categories">
          <button
            class="tab active"
            data-category="Fiction"
            aria-selected="true"
          >
            Fiction
          </button>
          <button class="tab" data-category="Non-Fiction" aria-selected="false">
            Non-Fiction
          </button>
          <button class="tab" data-category="Children" aria-selected="false">
            Children
          </button>
        </nav>
        <!-- in index.html header -->
        <div class="search">
          <input
            id="search"
            type="search"
            placeholder="Search by title or author…"
            aria-label="Search books"
          />
          <button
            id="openRequestBtn"
            class="btn btn-secondary btn-ghost"
            type="button"
            aria-controls="requestPanel"
          >
            Request a book
          </button>
        </div>
      </div>
    </header>

    <main class="wrap">
      <!-- === Featured (Embla predefined — class names) === -->
      <section id="homeCarousel" class="panel" aria-label="Featured books">
        <div class="flex between" style="margin-bottom: 0.4rem">
          <strong>Featured</strong>
          <div class="muted" id="carouselCount"></div>
        </div>

        <div class="embla" id="embla">
          <div class="embla__viewport" id="emblaViewport">
            <div class="embla__container" id="emblaContainer">
              <!-- Slides injected by scripts/index/carousel.js -->
            </div>
          </div>

          <div class="embla__controls">
            <div class="embla__buttons">
              <button
                class="embla__button embla__button--prev"
                id="emblaPrev"
                type="button"
                aria-label="Previous"
              >
                ‹
              </button>
              <button
                class="embla__button embla__button--next"
                id="emblaNext"
                type="button"
                aria-label="Next"
              >
                ›
              </button>
            </div>
            <div class="embla__dots" id="emblaDots"></div>
          </div>
        </div>
      </section>

      <section id="bookGrid" class="grid" aria-live="polite"></section>
      <p id="emptyState" class="muted" hidden>
        No books found here yet. Try another category or clear search.
      </p>

      <!-- Request a Book (unchanged) -->
      <details class="panel" id="requestPanel" open>
        <summary><strong>Can’t find a book?</strong> Request it</summary>
        <form id="requestForm" class="stack">
          <div class="grid-2">
            <input name="rtitle" placeholder="Title *" required />
            <input name="rauthor" placeholder="Author *" required />
            <input name="rname" placeholder="Your name *" required />
            <input
              name="rphone"
              placeholder="Phone/WhatsApp *"
              inputmode="tel"
              required
            />
          </div>
          <textarea
            name="rnotes"
            rows="3"
            placeholder="Anything else? (edition, language, condition, etc.)"
          ></textarea>
          <div class="flex">
            <button class="btn" type="submit">Save & Open WhatsApp</button>
            <a
              id="reqWaLink"
              class="btn btn-secondary"
              href="#"
              target="_blank"
              rel="noopener"
              style="display: none"
              >Send on WhatsApp</a
            >
            <span id="reqMsg" class="muted" style="margin-left: 0.6rem"></span>
          </div>
        </form>
      </details>
    </main>

    <footer class="site-footer">
      <div class="wrap">
        <p>
          WhatsApp Srikar to purchase. No online checkout.
          <a href="./admin.html">Admin</a>
        </p>
      </div>
    </footer>

    <!-- Page logic lives in modules under ./scripts/index/*.js -->
    <script type="module" src="./scripts/index/main.js"></script>

    <button
      id="requestFab"
      class="request-fab"
      type="button"
      aria-controls="requestPanel"
      title="Request a book"
      aria-label="Request a book"
    >
      Request
    </button>
  </body>
</html>
