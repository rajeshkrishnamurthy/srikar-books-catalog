<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Srikar’s Books — Catalog</title>
    <meta
      name="description"
      content="Browse Srikar’s curated used books. Message on WhatsApp to buy."
    />
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin />
    <!-- Base styles shared across admin + catalog -->
    <link rel="stylesheet" href="./styles.css?v=7" />
    <!-- Page-specific tweaks -->
    <link rel="stylesheet" href="./styles/index.css?v=1" />
    <!-- NEW: Embla carousel styles -->
    <link rel="stylesheet" href="./styles/carousel.css?v=2" />
  </head>
  <body>
    <header class="site-header">
      <div class="wrap">
        <h1 class="brand"><a href="./">Srikar’s Books</a></h1>
        <nav class="tabs" role="tablist" aria-label="Categories">
          <button
            class="tab active"
            data-category="Fiction"
            aria-selected="true"
          >
            Fiction
          </button>
          <button class="tab" data-category="Non-Fiction" aria-selected="false">
            Non-Fiction
          </button>
          <button class="tab" data-category="Children" aria-selected="false">
            Children
          </button>
        </nav>
        <!-- in index.html header -->
        <div class="search">
          <input
            id="search"
            type="search"
            placeholder="Search by title or author…"
            aria-label="Search books"
          />
          <button
            id="menuBtn"
            class="icon-btn"
            type="button"
            aria-haspopup="menu"
            aria-expanded="false"
            aria-controls="siteMenu"
            title="Menu"
            aria-label="Open menu"
          >
            <!-- burger icon -->
            <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
              <path
                fill="currentColor"
                d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z"
              />
            </svg>
          </button>

          <div id="siteMenu" class="menu" role="menu" hidden>
            <a href="#requestPanel" role="menuitem" data-action="request"
              >Request a book</a
            >
            <a href="./admin.html" role="menuitem">Admin</a>
          </div>
        </div>
      </div>
    </header>

    <main class="wrap">
      <!-- === Featured (Embla predefined — class names) === -->
      <section id="homeCarousel" class="panel" aria-labelledby="feat-title">
        <div class="flex between">
          <h2 id="feat-title">Featured</h2>
          <span id="carouselCount" class="muted"></span>
        </div>

        <div class="embla">
          <div
            id="emblaViewport"
            class="embla__viewport"
            tabindex="0"
            aria-label="Featured books"
          >
            <div id="emblaContainer" class="embla__container"></div>
          </div>

          <!-- NEW: overlay arrows (bigger & centered) -->
          <button
            id="emblaPrev"
            class="embla__button embla__button--prev"
            type="button"
            aria-label="Previous slide"
          >
            <!-- chevron-left -->
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path
                fill="currentColor"
                d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"
              />
            </svg>
          </button>
          <button
            id="emblaNext"
            class="embla__button embla__button--next"
            type="button"
            aria-label="Next slide"
          >
            <!-- chevron-right -->
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path
                fill="currentColor"
                d="M8.59 16.59 10 18l6-6-6-6-1.41 1.41L13.17 12z"
              />
            </svg>
          </button>
        </div>

        <div
          id="emblaDots"
          class="embla__dots"
          role="tablist"
          aria-label="Featured carousel pagination"
        ></div>
      </section>

      <section id="bookGrid" class="grid" aria-live="polite"></section>
      <p id="emptyState" class="muted" hidden>
        No books found here yet. Try another category or clear search.
      </p>

      <!-- Request a Book (unchanged) -->
      <details class="panel" id="requestPanel" open>
        <summary><strong>Can’t find a book?</strong> Request it</summary>
        <form id="requestForm" class="stack">
          <div class="grid-2">
            <input name="rtitle" placeholder="Title *" required />
            <input name="rauthor" placeholder="Author *" required />
            <input name="rname" placeholder="Your name *" required />
            <input
              name="rphone"
              placeholder="Phone/WhatsApp *"
              inputmode="tel"
              required
            />
          </div>
          <textarea
            name="rnotes"
            rows="3"
            placeholder="Anything else? (edition, language, condition, etc.)"
          ></textarea>
          <div class="flex">
            <button class="btn" type="submit">Save & Open WhatsApp</button>
            <a
              id="reqWaLink"
              class="btn btn-secondary"
              href="#"
              target="_blank"
              rel="noopener"
              style="display: none"
              >Send on WhatsApp</a
            >
            <span id="reqMsg" class="muted" style="margin-left: 0.6rem"></span>
          </div>
        </form>
      </details>
    </main>

    <footer class="site-footer">
      <div class="wrap">
        <p>
          WhatsApp Srikar to purchase. No online checkout.
          <a href="./admin.html">Admin</a>
        </p>
      </div>
    </footer>

    <!-- Page logic lives in modules under ./scripts/index/*.js -->
    <script type="module" src="./scripts/index/main.js"></script>

    <button
      id="requestFab"
      class="request-fab"
      type="button"
      aria-controls="requestPanel"
      title="Request a book"
      aria-label="Request a book"
    >
      Request
    </button>
  </body>
</html>
