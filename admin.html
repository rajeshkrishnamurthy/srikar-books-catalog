<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Srikar‚Äôs Books ‚Äî Admin</title>
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin />
    <link rel="stylesheet" href="./styles.css" />
    <!-- Page-specific tweaks for admin layout (moved out of inline <style>) -->
    <link rel="stylesheet" href="./styles/admin.css?v=1" />
  </head>
  <body>
    <header class="site-header">
      <div class="wrap">
        <h1 class="brand"><a href="./">Srikar‚Äôs Books</a></h1>
        <div class="site-header__actions">
          <a
            class="btn btn-ghost site-header__link"
            href="./"
            target="_blank"
            rel="noopener"
          >
            View catalog
          </a>
          <button id="signOutBtn" class="btn btn-secondary" type="button">
            Sign out
          </button>
        </div>
      </div>
    </header>

    <main class="wrap">
      <!-- Auth panel -->
      <section class="auth" id="auth">
        <h2>Admin sign in</h2>
        <p class="muted">
          Use your admin email. Only whitelisted emails can add/remove books.
        </p>
        <form id="loginForm" class="stack">
          <input
            id="email"
            type="email"
            placeholder="email@example.com"
            required
          />
          <input
            id="password"
            type="password"
            placeholder="Password"
            required
          />
          <button class="btn" type="submit">Sign in</button>
          <p id="authError" class="error" hidden></p>
        </form>
      </section>

      <!-- Admin app -->
      <section class="admin" id="admin" style="display: none">
        <div class="admin-topbar">
          <div class="admin-topbar__brand">
            <h2 class="admin-hero__title">Admin workspace</h2>
          </div>
        </div>

        <nav
          class="admin-nav"
          id="adminNav"
          aria-label="Admin sections"
          role="tablist"
        >
          <button
            type="button"
            class="admin-nav__item is-active"
            role="tab"
            id="navTab-manageBooks"
            aria-controls="addBookPanel"
            aria-expanded="true"
            data-nav="manageBooks"
          >
            <span class="admin-nav__title">Manage books</span>
            <span class="admin-nav__meta">Add &amp; stock</span>
          </button>
          <button
            type="button"
            class="admin-nav__item"
            role="tab"
            id="navTab-bundles"
          aria-controls="bundlesPanel"
          aria-expanded="false"
          data-nav="bundles"
        >
          <span class="admin-nav__title">Bundles</span>
          <span class="admin-nav__meta">Supplier packs</span>
        </button>
          <button
            type="button"
            class="admin-nav__item"
            role="tab"
          id="recordSaleBtn"
          data-nav="recordSale"
          aria-controls="saleEntryPanel"
          aria-expanded="false"
        >
            <span class="admin-nav__title">Sale</span>
          <span class="admin-nav__meta">Multi-book orders</span>
        </button>
          <button
            type="button"
            class="admin-nav__item"
            role="tab"
            id="navTab-bookRequests"
            aria-controls="bookRequestsPanel"
            aria-expanded="false"
            data-nav="bookRequests"
          >
            <span class="admin-nav__title">Book requests</span>
            <span class="admin-nav__meta">Inbox</span>
          </button>
          <button
            type="button"
            class="admin-nav__item"
            role="tab"
            id="navTab-suppliers"
            aria-controls="suppliersPanel"
            aria-expanded="false"
            data-nav="suppliers"
          >
            <span class="admin-nav__title">Suppliers</span>
            <span class="admin-nav__meta">Add &amp; manage</span>
          </button>
          <button
            type="button"
            class="admin-nav__item"
            role="tab"
            id="navTab-customers"
            aria-controls="customersPanel"
            aria-expanded="false"
            data-nav="customers"
          >
            <span class="admin-nav__title">Customers</span>
            <span class="admin-nav__meta">Master</span>
          </button>
        </nav>

        <div id="manageBooksAnchor" class="panel-anchor" aria-hidden="true"></div>

        <div
          class="manage-sub-nav"
          id="manageSubNav"
          role="tablist"
          aria-label="Manage books sub menu"
          data-parent-nav="manageBooks"
          hidden
        >
          <button
            type="button"
            class="manage-sub-nav__item is-active"
            data-manage-tab="add"
            aria-controls="addBookPanel"
            aria-current="page"
          >
            Add
          </button>
          <button
            type="button"
            class="manage-sub-nav__item"
            data-manage-tab="available"
            aria-controls="availableBooksPanel"
          >
            Available
          </button>
          <button
            type="button"
            class="manage-sub-nav__item"
            data-manage-tab="sold"
            aria-controls="soldBooksPanel"
          >
            Sold
          </button>
        </div>

        <div
          class="manage-sub-nav"
          id="bundlesSubNav"
          role="tablist"
          aria-label="Bundles sub menu"
          data-parent-nav="bundles"
          hidden
        >
          <button
            type="button"
            class="manage-sub-nav__item is-active"
            data-manage-tab="create"
            aria-controls="bundleCreatePanel"
            aria-current="page"
          >
            Create
          </button>
          <button
            type="button"
            class="manage-sub-nav__item"
            data-manage-tab="manage"
            aria-controls="bundleManagePanel"
          >
            Manage
          </button>
        </div>

        <div
          class="manage-sub-nav"
          id="saleSubNav"
          role="tablist"
          aria-label="Sale sub menu"
          data-parent-nav="recordSale"
          hidden
        >
          <button
            type="button"
            class="manage-sub-nav__item is-active"
            data-manage-tab="record"
            aria-controls="saleEntryPanel"
            aria-current="page"
          >
            Record
          </button>
        </div>

        <div
          class="manage-sub-nav"
          id="bookRequestsSubNav"
          role="tablist"
          aria-label="Book requests sub menu"
          data-parent-nav="bookRequests"
          hidden
        >
          <button
            type="button"
            class="manage-sub-nav__item is-active"
            data-manage-tab="open"
            aria-controls="bookRequestsOpenPanel"
            aria-current="page"
          >
            Open
          </button>
          <button
            type="button"
            class="manage-sub-nav__item"
            data-manage-tab="closed"
            aria-controls="bookRequestsClosedPanel"
          >
            Closed
          </button>
        </div>

        <div
          class="manage-sub-nav"
          id="suppliersSubNav"
          role="tablist"
          aria-label="Suppliers sub menu"
          data-parent-nav="suppliers"
          hidden
        >
          <button
            type="button"
            class="manage-sub-nav__item is-active"
            data-manage-tab="create"
            aria-controls="supplierCreatePanel"
            aria-current="page"
          >
            Create
          </button>
          <button
            type="button"
            class="manage-sub-nav__item"
            data-manage-tab="manage"
            aria-controls="supplierManagePanel"
          >
            Manage
          </button>
        </div>

        <div
          class="manage-sub-nav"
          id="customersSubNav"
          role="tablist"
          aria-label="Customers sub menu"
          data-parent-nav="customers"
          hidden
        >
          <button
            type="button"
            class="manage-sub-nav__item is-active"
            data-manage-tab="create"
            aria-controls="customerCreatePanel"
            aria-current="page"
          >
            Create
          </button>
          <button
            type="button"
            class="manage-sub-nav__item"
            data-manage-tab="manage"
            aria-controls="customerManagePanel"
          >
            Manage
          </button>
        </div>

        <!-- Add book -->
        <details class="panel" id="addBookPanel" open>
          <summary><strong>Add a book</strong></summary>

          <div class="add-book-card">
            <div class="add-book-helper">
              <p class="add-book-helper__text">
                Fill Title and (optionally) Author, then click
                <em>Find details</em> to auto-fill ISBN/MRP/Format/Description and
                pre-fill the cover image.
              </p>
              <div class="add-book-helper__actions">
                <button class="btn md-tonal-btn" type="button" id="lookupBtn">
                  <span class="md-tonal-btn__icon" aria-hidden="true">üîç</span>
                  <span>Find details (ISBN/MRP)</span>
                </button>
                <span id="lookupMsg" class="md-helper" aria-live="polite"></span>
              </div>
              <div id="lookupResults" class="admin-list"></div>
            </div>

            <form id="addForm" class="add-book-form" autocomplete="off">
              <div class="add-book-columns">
                <div class="add-book-column add-book-column--primary">
                  <div class="add-book-field-grid">
                    <label class="md-field" for="bookTitleInput">
                      <span class="md-field__label">Title *</span>
                      <input
                        id="bookTitleInput"
                        name="title"
                        class="md-input"
                        placeholder="Enter book title"
                        required
                      />
                    </label>

                    <label class="md-field" for="authorInput">
                      <span class="md-field__label">Author</span>
                      <input
                        id="authorInput"
                        name="author"
                        class="md-input"
                        placeholder="Start typing to search authors"
                        list="authorList"
                        autocomplete="off"
                      />
                    </label>
                    <datalist id="authorList"></datalist>

                    <label class="md-field" for="categorySelect">
                      <span class="md-field__label">Category *</span>
                      <select id="categorySelect" name="category" class="md-input" required>
                        <option value="" selected disabled>Choose category</option>
                        <option>Fiction</option>
                        <option>Non-Fiction</option>
                        <option>Children</option>
                      </select>
                    </label>

                    <label class="md-field" for="binding">
                      <span class="md-field__label">Format *</span>
                      <select id="binding" name="binding" class="md-input" required>
                        <option value="" selected disabled>Select format</option>
                        <option>Paperback</option>
                        <option>Hardcover</option>
                      </select>
                    </label>

                    <label class="md-field" for="supplierSelect">
                      <span class="md-field__label">
                        Supplier
                        <button
                          type="button"
                          class="tooltip-trigger"
                          data-tooltip="Pick a supplier before adding books so pricing is tracked correctly."
                          aria-label="Supplier info"
                        >
                          <span class="tooltip-icon">i</span>
                        </button>
                      </span>
                      <select
                        id="supplierSelect"
                        name="supplierId"
                        class="md-input"
                        required
                      >
                        <option value="" selected disabled>Select supplier *</option>
                      </select>
                    </label>

                    <label class="md-field" for="condition">
                      <span class="md-field__label">Condition *</span>
                      <select id="condition" name="condition" class="md-input" required>
                        <option value="" selected disabled>Select condition</option>
                        <option>Good as new</option>
                        <option>Excellent</option>
                        <option>Gently used</option>
                        <option>Used</option>
                      </select>
                    </label>

                    <label class="md-field" for="descriptionInput">
                      <span class="md-field__label">Description</span>
                      <textarea
                        id="descriptionInput"
                        name="description"
                        rows="4"
                        class="md-input"
                        placeholder="Auto-filled or write a short marketing description"
                      ></textarea>
                    </label>
                  </div>
                </div>

                <div class="add-book-column add-book-column--secondary">
                  <div class="add-book-field-grid add-book-field-grid--compact">
                    <label class="md-field" for="priceInput">
                      <span class="md-field__label">
                        Price *
                        <button
                          type="button"
                          class="tooltip-trigger"
                          data-tooltip="Selling price shown to customers on the store."
                          aria-label="Price info"
                        >
                          <span class="tooltip-icon">i</span>
                        </button>
                      </span>
                      <input
                        id="priceInput"
                        name="price"
                        class="md-input"
                        placeholder="e.g., 250"
                        inputmode="numeric"
                        required
                      />
                    </label>

                    <label class="md-field" for="mrpInput">
                      <span class="md-field__label">
                        MRP *
                        <button
                          type="button"
                          class="tooltip-trigger"
                          data-tooltip="Reference list price printed on the book jacket."
                          aria-label="MRP info"
                        >
                          <span class="tooltip-icon">i</span>
                        </button>
                      </span>
                      <input
                        id="mrpInput"
                        name="mrp"
                        class="md-input"
                        placeholder="e.g., 499"
                        inputmode="numeric"
                        required
                      />
                    </label>

                    <label class="md-field" for="purchasePriceInput">
                      <span class="md-field__label">
                        Purchase price *
                        <button
                          type="button"
                          class="tooltip-trigger"
                          data-tooltip="Internal cost we pay the supplier; drives margin math."
                          aria-label="Purchase price info"
                        >
                          <span class="tooltip-icon">i</span>
                        </button>
                      </span>
                      <input
                        id="purchasePriceInput"
                        type="number"
                        name="purchasePrice"
                        class="md-input"
                        placeholder="Our cost"
                        inputmode="numeric"
                        min="0"
                        step="1"
                        aria-describedby="purchasePriceHelp"
                        required
                      />
                      <span id="purchasePriceHelp" class="md-helper sr-only">
                        Enter the amount paid to acquire the book; use zero for donations.
                      </span>
                    </label>

                    <label class="md-field" for="isbnInput">
                      <span class="md-field__label">ISBN</span>
                      <input
                        id="isbnInput"
                        name="isbn"
                        class="md-input"
                        placeholder="10 or 13 digits"
                      />
                    </label>
                  </div>

                  <div class="add-book-media">
                    <label class="md-field" for="coverInput">
                      <span class="md-field__label">
                        Cover image *
                        <button
                          type="button"
                          class="tooltip-trigger"
                          data-tooltip="Upload the front cover; use Search cover image if you need a suggestion."
                          aria-label="Cover image info"
                        >
                          <span class="tooltip-icon">i</span>
                        </button>
                      </span>
                      <div class="add-book-cover-row">
                        <input
                          name="cover"
                          id="coverInput"
                          type="file"
                          accept="image/*"
                          class="md-file-input"
                          required
                        />
                        <button
                          type="button"
                          id="searchCoverBtn"
                          class="btn md-tonal-btn"
                        >
                          <span class="md-tonal-btn__icon" aria-hidden="true">üñºÔ∏è</span>
                          <span>Search cover image</span>
                        </button>
                      </div>
                    </label>

                    <div id="coverPreview" class="cover-preview muted">
                      No cover selected.
                    </div>

                    <label class="md-field" for="moreImagesInput">
                      <span class="md-field__label">
                        More images (optional)
                        <button
                          type="button"
                          class="tooltip-trigger"
                          data-tooltip="Add lifestyle or spine shots to make the listing richer."
                          aria-label="More images info"
                        >
                          <span class="tooltip-icon">i</span>
                        </button>
                      </span>
                      <input
                        id="moreImagesInput"
                        name="more"
                        type="file"
                        accept="image/*"
                        multiple
                        class="md-file-input"
                      />
                    </label>
                  </div>

                  <label class="md-field md-field--checkbox">
                    <input type="checkbox" name="featured" id="featuredAdd" />
                    <span class="md-field__label">Show on homepage carousel</span>
                  </label>
                </div>
              </div>

              <div class="add-book-actions">
                <button class="btn" type="submit">Add book</button>
                <p id="addMsg" class="muted" aria-live="polite"></p>
              </div>
            </form>
          </div>
        </details>

        <details class="panel" id="availableBooksPanel" open>
          <summary>
            <strong id="availableSummaryLabel">Available</strong>
          </summary>
          <div class="inventory-card">
            <div class="inventory-card__body">
              <div class="inventory-search">
                <label
                  id="availableSearchLabel"
                  class="sr-only"
                  for="availableSearchInput"
                >
                  Search available books
                </label>
                <div class="md-field bundle-search-field inventory-search__field">
                  <span class="md-field__label">Search inventory</span>
                  <div class="bundle-search-input">
                    <span class="bundle-search-icon" aria-hidden="true">üîç</span>
                    <input
                      id="availableSearchInput"
                      type="search"
                      class="bundle-search-input-field md-input"
                      placeholder="Search title or author‚Ä¶"
                      aria-labelledby="availableSummaryLabel availableSearchLabel"
                      aria-controls="availList"
                      autocomplete="off"
                    />
                  </div>
              </div>
              <p
                id="availableSearchStatus"
                class="sr-only"
                aria-live="polite"
              ></p>
            </div>
              <div
                class="inventory-pagination pagination-shell"
                data-available-pagination
                aria-busy="false"
              >
                <div class="inventory-pagination__summary pagination-shell__summary">
                  <p
                    id="availablePaginationSummary"
                    class="muted"
                    aria-live="polite"
                  >
                    Items 0‚Äì0 of 0 available books
                  </p>
                </div>
                <div class="inventory-pagination__actions inventory-pagination__controls pagination-shell__actions">
                  <div class="pagination-size pagination-shell__size">
                    <span class="pagination-size__label">Rows per page</span>
                    <label for="availablePageSize" class="sr-only">Items per page</label>
                    <select
                      id="availablePageSize"
                      class="md-input pagination-size-select"
                      aria-label="Items per page"
                    >
                      <option value="10">10</option>
                      <option value="20" selected>20</option>
                      <option value="50">50</option>
                    </select>
                  </div>
                  <div class="pagination-stepper pagination-shell__stepper">
                    <button
                      type="button"
                      id="availablePaginationPrev"
                      class="btn btn-secondary pagination-shell__prev"
                      data-pagination="prev"
                      aria-controls="availList"
                      aria-label="Previous page"
                    >
                      <span aria-hidden="true">‚Äπ</span>
                      <span class="pagination-control__label">Prev</span>
                    </button>
                    <div
                      class="inventory-pagination__pages pagination-shell__pages"
                      data-pagination-pages
                      role="group"
                      aria-label="Page selection"
                      hidden
                    ></div>
                    <button
                      type="button"
                      id="availablePaginationNext"
                      class="btn pagination-shell__next"
                      data-pagination="next"
                      aria-controls="availList"
                      aria-label="Next page"
                    >
                      <span class="pagination-control__label">Next</span>
                      <span aria-hidden="true">‚Ä∫</span>
                    </button>
                  </div>
                </div>
              </div>
              <div id="availList" class="admin-list inventory-list"></div>
          </div>
        </div>
      </details>

        <details class="panel" id="soldBooksPanel">
          <summary><strong>Sold</strong></summary>
          <div class="inventory-card">
            <div class="inventory-card__body">
              <p class="muted inventory-card__hint">
                Recently sold entries stay here until reconciled with bookkeeping.
              </p>
              <div
                class="inventory-pagination pagination-shell"
                data-sold-pagination
                aria-busy="false"
              >
                <div class="inventory-pagination__summary pagination-shell__summary">
                  <p
                    id="soldPaginationSummary"
                    aria-live="polite"
                    data-pagination-summary
                  >
                    Items 0‚Äì0 of 0 - Sold
                  </p>
                </div>
                <div class="inventory-pagination__actions inventory-pagination__controls pagination-shell__actions">
                  <div class="pagination-size pagination-shell__size">
                    <span class="pagination-size__label">Rows per page</span>
                    <label for="soldPageSize" class="sr-only">Items per page</label>
                    <select id="soldPageSize" aria-label="Items per page" class="pagination-size-select">
                      <option value="10">10</option>
                      <option value="20" selected>20</option>
                      <option value="50">50</option>
                    </select>
                  </div>
                  <div class="pagination-stepper pagination-shell__stepper">
                    <button
                      type="button"
                      id="soldPaginationPrev"
                      class="btn btn-secondary pagination-shell__prev"
                      data-pagination="prev"
                      aria-controls="soldList"
                      aria-label="Previous page"
                    >
                      <span aria-hidden="true">‚Äπ</span>
                      <span class="pagination-control__label">Prev</span>
                    </button>
                    <div
                      class="inventory-pagination__pages pagination-shell__pages"
                      data-pagination-pages
                      role="group"
                      aria-label="Page selection"
                      hidden
                    ></div>
                    <button
                      type="button"
                      id="soldPaginationNext"
                      class="btn pagination-shell__next"
                      data-pagination="next"
                      aria-controls="soldList"
                      aria-label="Next page"
                    >
                      <span class="pagination-control__label">Next</span>
                      <span aria-hidden="true">‚Ä∫</span>
                    </button>
                  </div>
                </div>
              </div>
              <div id="soldList" class="admin-list inventory-list"></div>
            </div>
          </div>
        </details>

        <details class="panel" id="bookRequestsPanel" open>
          <summary><strong>Book Requests</strong></summary>
          <section id="bookRequestsOpenPanel" class="book-requests-section">
            <p class="muted" style="margin-bottom: 0.4rem">
              Requests sent from the catalog.
            </p>
            <div id="reqOpen" class="admin-list"></div>
          </section>
          <section id="bookRequestsClosedPanel" class="book-requests-section" hidden>
            <p class="muted" style="margin-bottom: 0.3rem">
              <strong>Closed</strong>
            </p>
            <div id="reqClosed" class="admin-list"></div>
          </section>
        </details>

        <details class="panel" id="saleEntryPanel" hidden>
          <summary><strong>Record a sale</strong></summary>
          <div class="sale-entry-grid">
            <section class="sale-entry-card sale-entry-card--header">
              <div class="sale-entry-card__header">
                <h3>Sale details</h3>
                <p class="muted">
                  Pick the sale date, attach a customer, then start capturing line items.
                </p>
              </div>
              <form id="saleHeaderForm" class="sale-header-form" autocomplete="off">
                <input type="hidden" id="saleHeaderCustomerId" />
                <div class="sale-header-grid">
                  <div class="sale-header-column sale-header-column--date">
                    <label class="md-field sale-date-field sale-date-field--full" for="saleHeaderSaleDate">
                      <span class="md-field__label">Sale date</span>
                      <div class="sale-date-field__controls">
                        <input
                          id="saleHeaderSaleDate"
                          name="saleDate"
                          type="text"
                          class="md-input"
                          placeholder="dd-mon-yy"
                          autocomplete="off"
                          inputmode="text"
                        />
                        <div class="sale-date-picker-trigger">
                          <svg
                            class="sale-date-picker-icon"
                            viewBox="0 0 24 24"
                            role="presentation"
                            aria-hidden="true"
                          >
                            <path
                              d="M7 3a1 1 0 0 1 1 1v1h8V4a1 1 0 1 1 2 0v1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h1V4a1 1 0 0 1 1-1zm12 8H5v8h14zm-2-6H7v1a1 1 0 0 1-2 0V5H5a1 1 0 0 0-1 1v3h16V6a1 1 0 0 0-1-1h-.17v1a1 1 0 1 1-2 0z"
                            />
                          </svg>
                          <input
                            type="date"
                            id="saleHeaderDatePicker"
                            class="sale-date-picker-input"
                            aria-label="Pick sale date"
                          />
                        </div>
                      </div>
                    </label>
                  </div>
                  <div class="sale-header-column sale-header-column--customer">
                    <div class="sale-customer-card">
                      <div id="saleCustomerLookup" class="sale-customer-lookup">
                        <div class="md-field sale-customer-search">
                          <label class="md-field__label" for="saleCustomerLookupSearch">
                            Search customers
                          </label>
                          <div class="bundle-search-input">
                            <span class="bundle-search-icon" aria-hidden="true">üîç</span>
                            <input
                              id="saleCustomerLookupSearch"
                              type="search"
                              class="bundle-search-input-field md-input"
                              placeholder="Start typing a name"
                              autocomplete="off"
                            />
                          </div>
                        </div>
                        <p id="saleCustomerLookupEmpty" class="md-helper sale-customer-empty" hidden></p>
                        <ul id="saleCustomerLookupList" class="admin-list"></ul>
                      </div>
                      <div class="sale-customer-summary-wrap">
                        <span class="md-field__label">Selected customer</span>
                        <p
                          id="saleHeaderCustomerSummary"
                          class="sale-customer-summary"
                          data-empty="true"
                          data-default-summary=""
                        ></p>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="sale-entry-actions sale-entry-actions--header">
                  <button id="saleHeaderContinue" type="submit" class="btn">
                    Add books
                  </button>
                  <button type="reset" class="btn btn-secondary">Reset</button>
                </div>
                <p id="saleHeaderMsg" class="md-helper" aria-live="polite"></p>
              </form>
            </section>

            <section class="sale-entry-card sale-entry-card--lines">
              <div class="sale-entry-card__header">
                <h3>Add books</h3>
              </div>
              <form id="saleLineDraftForm" class="stack sale-line-draft">
                <span id="saleLineDraftLabel" class="sale-line-draft__title sr-only">
                  Add books
                </span>
                <div class="sale-line-grid">
                  <div class="sale-line-field sale-line-field--title md-field">
                    <label class="md-field__label" for="saleLineBookTitle">Title</label>
                    <input
                      id="saleLineBookTitle"
                      name="saleLineBookTitle"
                      type="text"
                      class="md-input"
                      placeholder="Start typing a title"
                      autocomplete="off"
                      aria-autocomplete="list"
                      aria-expanded="false"
                      aria-controls="saleLineSuggestions"
                    />
                    <ul
                      id="saleLineSuggestions"
                      role="listbox"
                      aria-label="Matching titles"
                    ></ul>
                  </div>
                  <div class="sale-line-field sale-line-field--price md-field">
                    <label class="md-field__label" for="saleLinePrice">Selling price</label>
                    <input
                      id="saleLinePrice"
                      name="sellingPrice"
                      type="text"
                      class="md-input"
                      autocomplete="off"
                      inputmode="numeric"
                    />
                  </div>
                  <div class="sale-line-field sale-line-field--supplier md-field">
                    <label class="md-field__label" for="saleLineSupplierSelect">Supplier</label>
                    <select
                      id="saleLineSupplierSelect"
                      name="saleLineSupplierId"
                      class="md-input"
                      required
                    >
                      <option value="" selected disabled>Select supplier *</option>
                    </select>
                  </div>
                </div>
                <input type="hidden" id="saleLineBookId" name="bookId" value="" />
                <p
                  id="saleLineBookSummary"
                  class="sr-only"
                  data-empty="true"
                  data-default-summary="No book selected"
                >
                  No book selected
                </p>
                <div class="sale-line-actions">
                  <button
                    type="submit"
                    id="saleLineAddBtn"
                    class="btn btn-ghost sale-line-submit"
                    disabled
                  >
                    Add
                  </button>
                </div>
                <p id="saleTitleMsg" class="md-helper" aria-live="polite"></p>
                <p id="saleLineMsg" class="md-helper" aria-live="polite"></p>
              </form>
              <div class="sale-line-results-card">
                <table class="admin-table sale-line-table">
                  <thead>
                    <tr>
                      <th scope="col">Title</th>
                      <th scope="col">Supplier</th>
                      <th scope="col" class="numeric">Price</th>
                      <th scope="col" class="sr-only">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="saleLineItemsBody"></tbody>
                </table>
                <div id="saleLineTotals" class="sale-line-totals">
                  <span id="saleLineTotalsCount" class="sale-line-totals__label"></span>
                  <span id="saleLineTotalsAmount" class="sale-line-totals__amount"></span>
                </div>
                <p
                  id="saleLineRemovalStatus"
                  class="sr-only"
                  aria-live="polite"
                ></p>
              </div>
            </section>
          </div>
          <div class="sale-entry-footer-card">
            <div class="sale-entry-actions">
              <button id="salePersistBtn" class="btn">Persist sale</button>
              <p id="salePersistMsg" class="md-helper" aria-live="polite"></p>
            </div>
            <ul id="saleLineStatusList" class="stack sale-status-log"></ul>
          </div>
        </details>


        <details class="panel" id="bundlesPanel" hidden>
          <summary><strong>Bundles</strong></summary>
          <div id="bundleCreatePanel" class="bundle-section">
            <h3>Create a bundle</h3>
            <p class="muted">
              Pick a supplier, add at least two books from that supplier, and set a bundle
              price (25% discount recommended).
            </p>
            <form id="bundleForm" class="bundle-create-grid" autocomplete="off">
              <div class="bundle-columns">
                <div class="bundle-column bundle-column--primary">
                  <label class="md-field">
                    <span class="md-field__label">Bundle title</span>
                    <input
                      id="bundleTitleInput"
                      class="md-input"
                      type="text"
                      placeholder="e.g., Beginner sci-fi combo"
                      autocomplete="off"
                    />
                  </label>

                  <div class="bundle-book-search">
                    <label class="field-label field-label--with-help" for="bundleBookInput">
                      Add book to bundle
                      <button
                        type="button"
                        class="tooltip-trigger"
                        aria-label="Search to select a book. Matches are limited to the chosen supplier."
                        data-tooltip="Search to select a book. Matches are limited to the chosen supplier."
                      >
                        <span class="tooltip-icon" aria-hidden="true">i</span>
                        <span class="sr-only">Learn more</span>
                      </button>
                    </label>
                    <input
                      id="bundleBookInput"
                      class="bundle-autocomplete-field md-input"
                      type="search"
                      placeholder="Search catalog titles"
                      autocomplete="off"
                      disabled
                      aria-autocomplete="list"
                      aria-controls="bundleBookSuggestions"
                    />
                    <input type="hidden" id="bundleBookHiddenInput" />
                    <ul
                      id="bundleBookSuggestions"
                      class="admin-list bundle-suggestions"
                      role="listbox"
                    ></ul>
                    <p id="bundleBookMsg" class="md-helper"></p>
                    <p
                      id="bundleBookSummary"
                      class="muted"
                      data-empty="true"
                      data-default-summary="No book selected."
                    ></p>
                  </div>

                  <div class="bundle-price-row">
                    <label class="md-field bundle-price-field">
                      <span class="md-field__label field-label--with-help">
                        Bundle price (‚Çπ)
                        <button
                          type="button"
                          class="tooltip-trigger"
                          aria-label="Select at least two books to see a recommended price."
                          data-tooltip="Select at least two books to see a recommended price."
                        >
                          <span class="tooltip-icon" aria-hidden="true">i</span>
                          <span class="sr-only">Learn more</span>
                        </button>
                      </span>
                      <input
                        id="bundlePriceInput"
                        class="md-input"
                        type="text"
                        inputmode="numeric"
                        placeholder="Enter bundle price"
                        autocomplete="off"
                      />
                      <p id="bundlePriceMsg" class="md-helper bundle-price-error" role="alert"></p>
                    </label>
                    <p id="bundleRecommendedHint" class="md-helper bundle-recommended-hint"></p>
                  </div>
                </div>

                <div class="bundle-column bundle-column--secondary">
                  <label class="md-field">
                    <span class="md-field__label field-label--with-help">
                      Supplier
                      <button
                        type="button"
                        class="tooltip-trigger"
                        aria-label="Supplier locks after you make the first selection. Use Reset bundle to change."
                        data-tooltip="Supplier locks after the first selection. Use Reset bundle to change."
                      >
                        <span class="tooltip-icon" aria-hidden="true">i</span>
                        <span class="sr-only">Learn more</span>
                      </button>
                    </span>
                    <select id="bundleSupplierSelect" class="md-input">
                      <option value="">Choose supplier</option>
                    </select>
                  </label>

                  <div class="bundle-selected-container">
                    <div class="bundle-selected-header">
                      <strong>Selected books</strong>
                      <span class="hint">Minimum two unique books</span>
                    </div>
                    <ul id="bundleSelectedBooks" class="bundle-selected-list"></ul>
                  </div>
                </div>
              </div>

              <div class="bundle-actions">
                <button id="bundleSubmitBtn" class="btn" type="submit" disabled>
                  Create bundle
                </button>
                <button id="bundleResetBtn" class="btn btn-secondary" type="reset">
                  Reset bundle
                </button>
              </div>
            </form>
            <p id="bundleMsg" class="muted" aria-live="polite"></p>
          </div>

          <section class="bundle-list-panel" id="bundleManagePanel" hidden>
            <div class="bundle-manage-card">
              <h4>Existing bundles</h4>
              <p class="muted">
                Search bundles by book title or filter by supplier/status to manage publish state.
              </p>
              <div class="bundle-list-filters">
                <div class="md-field bundle-search-field">
                  <span id="bundleSearchLabel" class="md-field__label">Search bundles</span>
                  <div class="bundle-search-input" id="bundleSearchInputWrap">
                    <span class="bundle-search-icon" aria-hidden="true">üîç</span>
                    <input
                      id="bundleSearchInput"
                      class="bundle-search-input-field md-input"
                      type="search"
                      placeholder="Type a book title (min 2 characters)"
                      aria-autocomplete="list"
                      aria-controls="bundleSearchSuggestions"
                      aria-labelledby="bundleSearchLabel"
                    />
                  </div>
                  <input type="hidden" id="bundleSearchHiddenInput" />
                  <ul id="bundleSearchSuggestions" class="md-suggestion-list" role="listbox"></ul>
                  <p id="bundleSearchMsg" class="md-helper"></p>
                </div>
                <div class="md-field">
                  <label class="md-field__label" for="bundleFilterSupplier">Supplier</label>
                  <select id="bundleFilterSupplier" class="md-input">
                    <option value="">All suppliers</option>
                  </select>
                </div>
                <div class="md-field">
                  <label class="md-field__label" for="bundleFilterStatus">Status</label>
                  <select id="bundleFilterStatus" class="md-input">
                    <option value="">All statuses</option>
                    <option value="Draft">Draft</option>
                    <option value="Published">Published</option>
                  </select>
                </div>
              </div>
              <div class="bundle-results-card">
                <div id="bundleResults" class="bundle-results"></div>
                <p id="bundleEmpty" class="md-helper bundle-results-empty" hidden>No bundles found.</p>
              </div>
            </div>
          </section>
        </details>

        <section class="panel" id="bundleStatusPanel" hidden>
          <h3>Bundle status</h3>
          <div class="bundle-status-chip" id="bundleStatusChip" data-status="Draft">Status: Draft</div>
          <form id="bundleStatusForm" data-bundle-status="Draft">
            <div class="bundle-detail-grid">
              <label class="stack">
                <span class="field-label">Title</span>
                <input id="bundleDetailTitle" value="" data-original-value="" />
              </label>
              <label class="stack">
                <span class="field-label">Bundle price</span>
                <input id="bundleDetailPrice" value="" data-original-value="" />
              </label>
            </div>
            <div class="bundle-status-actions">
              <label class="bundle-toggle" for="bundlePublishToggle">
                <span class="bundle-toggle__control">
                  <input
                    id="bundlePublishToggle"
                    type="checkbox"
                    role="switch"
                    aria-label="Publish bundle"
                    aria-checked="false"
                  />
                  <span class="bundle-toggle__track">
                    <span class="bundle-toggle__thumb"></span>
                  </span>
                </span>
                <span class="bundle-toggle__state" data-draft="Draft" data-published="Published">Draft</span>
              </label>
              <p class="bundle-toggle__hint">Toggle on to publish, off to keep the bundle hidden.</p>
            </div>
          </form>
          <p id="bundleStatusMsg" class="muted" aria-live="polite"></p>
        </section>

        <details class="panel" id="suppliersPanel" open>
          <summary><strong>Suppliers</strong></summary>
          <div class="suppliers-grid">
            <section id="supplierCreatePanel" class="suppliers-card">
              <div class="suppliers-card__header">
                <h3>Add supplier</h3>
                <p class="muted">
                  Track trusted suppliers so you can reference their inventory quickly.
                </p>
              </div>
              <form id="supplierForm" class="suppliers-form" autocomplete="off">
                <input type="hidden" id="supplierIdInput" name="supplierId" />
                <div class="suppliers-form-grid">
                  <label class="md-field" for="supplierNameInput">
                    <span class="md-field__label">Supplier name *</span>
                    <input
                      id="supplierNameInput"
                      name="supplierName"
                      class="md-input"
                      placeholder="e.g., Rare Finds"
                      required
                    />
                  </label>
                  <label class="md-field" for="supplierLocationInput">
                    <span class="md-field__label">Location *</span>
                    <input
                      id="supplierLocationInput"
                      name="supplierLocation"
                      class="md-input"
                      placeholder="City or region"
                      required
                    />
                  </label>
                </div>
                <div class="suppliers-actions">
                  <button type="submit" class="btn">Save supplier</button>
                  <button type="button" id="supplierCancelBtn" class="btn btn-secondary">
                    Cancel
                  </button>
                </div>
              </form>
              <p id="supplierMsg" class="md-helper" aria-live="polite"></p>
            </section>
            <section id="supplierManagePanel" class="suppliers-card suppliers-card--list" hidden>
              <div class="suppliers-card__header">
                <h3>Saved suppliers</h3>
                <p class="muted">Manage records or view contact info at a glance.</p>
              </div>
              <ul id="supplierList" class="suppliers-list" aria-live="polite"></ul>
            </section>
          </div>
        </details>

        <details class="panel" id="customersPanel">
          <summary data-customer-panel-heading><strong>Customer master</strong></summary>
          <div id="customerPanel" class="customers-grid">
            <section id="customerCreatePanel" class="customer-card">
              <div class="customer-card__header">
                <h3>Create customer</h3>
                <p class="muted">Capture buyers once so future orders are faster.</p>
              </div>
              <form id="customerForm" class="customer-form" autocomplete="off">
                <input type="hidden" id="customerIdInput" name="customerId" />
                <div class="customer-form-grid">
                  <label class="md-field" for="customerNameInput">
                    <span class="md-field__label">Customer name *</span>
                    <input
                      id="customerNameInput"
                      name="customerName"
                      class="md-input"
                      placeholder="e.g., Rohan Desai"
                      required
                    />
                  </label>
                  <label class="md-field" for="customerLocationInput">
                    <span class="md-field__label">City / Location</span>
                    <input
                      id="customerLocationInput"
                      name="customerLocation"
                      class="md-input"
                      placeholder="Neighborhood or city"
                    />
                  </label>
                </div>
                <label class="md-field" for="customerAddressInput">
                  <span class="md-field__label">Address / Landmark</span>
                  <textarea
                    id="customerAddressInput"
                    name="customerAddress"
                    class="md-input"
                    rows="3"
                    placeholder="House number, landmark, delivery notes"
                  ></textarea>
                </label>
                <label class="md-field" for="customerWhatsAppInput">
                  <span class="md-field__label">WhatsApp (10 digits) *</span>
                  <input
                    id="customerWhatsAppInput"
                    name="customerWhatsApp"
                    class="md-input"
                    placeholder="+91 98765 43210"
                    inputmode="numeric"
                    required
                    aria-describedby="customerMsg"
                  />
                </label>
                <div class="customer-actions">
                  <button class="btn" type="submit">Save customer</button>
                  <button
                    class="btn btn-secondary"
                    type="button"
                    id="customerCancelBtn"
                  >
                    Cancel edit
                  </button>
                </div>
                <p id="customerMsg" class="md-helper" aria-live="polite"></p>
              </form>
            </section>
            <section id="customerManagePanel" class="customer-card customer-card--list" hidden>
              <div class="customer-card__header">
                <h3>Customers</h3>
                <p class="muted">Tap Edit to update contact info or location.</p>
              </div>
              <ul id="customerList" class="customer-list" aria-live="polite"></ul>
            </section>
          </div>
        </details>

        <!-- EDIT BOOK DIALOG -->
        <dialog id="editDialog" class="panel" style="max-width: 760px">
          <form id="editForm" method="dialog" class="stack">
            <h3>Edit book</h3>
            <input type="hidden" name="id" />

            <div class="grid-2">
              <input name="etitle" placeholder="Title *" required />
              <input
                name="eauthor"
                id="editAuthor"
                placeholder="Author"
                list="authorList"
                autocomplete="off"
              />

              <select name="ecategory" required>
                <option value="" selected disabled>Category *</option>
                <option>Fiction</option>
                <option>Non-Fiction</option>
                <option>Children</option>
              </select>

              <select name="ebinding" required>
                <option value="" selected disabled>Format *</option>
                <option>Paperback</option>
                <option>Hardcover</option>
              </select>

              <input
                name="eprice"
                placeholder="Price (‚Çπ)"
                inputmode="numeric"
              />
              <input name="emrp" placeholder="MRP (‚Çπ)" inputmode="numeric" />
              <select id="editSupplierSelect" name="esupplierId" required>
                <option value="" selected disabled>Select supplier *</option>
              </select>
              <div class="field-with-label">
                <label class="sr-only" for="editPurchasePriceInput">
                  Purchase price (our cost)
                </label>
                <input
                  id="editPurchasePriceInput"
                  type="number"
                  name="epurchasePrice"
                  placeholder="Purchase price (our cost)"
                  inputmode="numeric"
                  min="0"
                  step="1"
                  aria-describedby="editPurchasePriceHelp"
                />
                <span id="editPurchasePriceHelp" class="sr-only">
                  Enter the amount paid to acquire the book; use zero for donations.
                </span>
              </div>
              <input name="eisbn" placeholder="ISBN (10 or 13)" />
              <select name="econdition" required>
                <option value="" selected disabled>Condition *</option>
                <option>Good as new</option>
                <option>Excellent</option>
                <option>Gently used</option>
                <option>Used</option>
              </select>
            </div>

            <textarea
              name="edescription"
              rows="3"
              placeholder="Marketing description"
            ></textarea>

            <strong>Current cover</strong>
            <div id="editCoverPreview" class="cover-preview muted">
              No cover.
            </div>

            <div class="flex">
              <label
                ><strong>Replace cover</strong>
                <input
                  id="editCoverInput"
                  name="cover"
                  type="file"
                  accept="image/*"
                />
              </label>
              <label style="margin-left: 0.6rem"
                >Add more images
                <input
                  id="editMoreInput"
                  name="more"
                  type="file"
                  accept="image/*"
                  multiple
                />
              </label>
            </div>

            <div class="flex between">
              <button id="editSaveBtn" class="btn" type="submit">
                Save changes
              </button>
              <button
                id="editCancelBtn"
                class="btn btn-secondary"
                type="button"
              >
                Cancel
              </button>
            </div>
            <p id="editMsg" class="muted"></p>
          </form>
        </dialog>
      </section>
    </main>

    <!-- Entry point that wires the page using small modules -->
    <script type="module" src="./scripts/admin/main.js"></script>
  </body>
</html>
